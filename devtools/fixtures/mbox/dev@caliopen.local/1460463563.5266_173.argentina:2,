Received: from list by lists.gnu.org with archive (Exim 4.71)
	id 1aoz4a-0005ic-Kr
	for mharc-dev@caliopen.local; Sat, 09 Apr 2016 16:01:36 -0400
Received: from eggs.gnu.org ([2001:4830:134:3::10]:57991)
	by lists.gnu.org with esmtp (Exim 4.71)
	(envelope-from <clement.pit@gmail.com>) id 1aoz4Y-0005eV-1q
	for dev@caliopen.local; Sat, 09 Apr 2016 16:01:35 -0400
Received: from Debian-exim by eggs.gnu.org with spam-scanned (Exim 4.71)
	(envelope-from <clement.pit@gmail.com>) id 1aoz4U-0008Bv-Sv
	for dev@caliopen.local; Sat, 09 Apr 2016 16:01:33 -0400
Received: from mout.kundenserver.de ([212.227.126.133]:50856)
	by eggs.gnu.org with esmtp (Exim 4.71)
	(envelope-from <clement.pit@gmail.com>)
	id 1aoz4U-0008Bq-Jd; Sat, 09 Apr 2016 16:01:30 -0400
Received: from [18.189.83.142] ([18.189.83.142]) by mrelayeu.kundenserver.de
	(mreue001) with ESMTPSA (Nemesis) id 0Mbour-1b7Klp2vtV-00J4jj;
	Sat, 09 Apr 2016 22:01:28 +0200
Subject: Re: How do I set up font fallback in a robust way?
To: Eli Zaretskii <eliz@gnu.org>
References: <570954AA.7070604@gmail.com> <834mbain03.fsf@gnu.org>
Cc: dev@caliopen.local
From: =?UTF-8?Q?Cl=c3=a9ment_Pit--Claudel?= <clement.pit@gmail.com>
Message-ID: <57095F97.4060305@gmail.com>
Date: Sat, 9 Apr 2016 16:01:27 -0400
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:38.0) Gecko/20100101
	Thunderbird/38.6.0
MIME-Version: 1.0
In-Reply-To: <834mbain03.fsf@gnu.org>
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature";
	boundary="utpW0BGtxqEVlfLO7T0CtwIneomGl0f2j"
X-Provags-ID: V03:K0:sN2fzs77P1tGTX7YGOBrONO/FuSW+57mFT/sVczcf2pF1QuJk/j
	PQ9BdZISATcP5QpQePn9NZ6J9Icm/AgcHDVRhijYi8NTCPWWJDmGejL0QRaH62yOcvPOVfn
	iklQVBH26II0FLNPxi36EVVc7n+4UipBC2Z7lCu1NV7NPp8TnaHGvqBnBiTqx36d9fLyaVT
	X7I1H4oRG97UxaDhvsGTg==
X-UI-Out-Filterresults: notjunk:1;V01:K0:l3RLP8ZGGls=:6u0qmWal8YMFmn3JXRY1jf
	oB5ae7o1Bdd7WQqg4YuEeMeSPF4yNduKIqfckKVPhBiS8pbSiBua0qHjD8VTtI2fJWNbFfH8r
	pPAgP8YqchRh+b7xIW6u8BCa7l2zJFnVJ4EhyvsyITW9RbclztFHzJkJbBP5GOF2bO4rX4cHc
	0IRCDhPMkAdEl/1S5GFM7C+QUGgyQOkoCaMFSgTFz4Z70pOM2BvSBpDIH6GAy8+uHBTONfhwy
	6H+HYradlAwVeveQAhTgVW2PPkxCkkqx5JKTRFK5dHwP+bBVeIGOjS/ik8K1PPhqSxeocazCy
	Upxft0dk6XxXRoouf6G9k2FpL1OI+u97UNmfq8yGFGy0KTY6mqJn6KA7qnSl8zETPQq6NVZac
	FfSrN/s7+3cK6f06LsTgz3y7xYJymn9ZqPW8yPOHmUiFAKrdNLKTqZbnwtKrt7uQz318ENO4a
	9crMcE5HpR4x711kcd3ngaEQd88ABEASFUGJGJj/9W5sL6mhNSNQxeQacIJm2/M62OEjB30pc
	tH8EgeeDhQDycAHDai5bSxPuZwfMPl0h5ys3Ai3G5v+qriBOveegEvX2BlnSM1q6GZKibmtN3
	9LXWX7Rs8eYysv/rfj++GBQM9dJ09jqkBooyxgBNv95Ac/lrvj72E1TzputXakuV6oKzjeYcF
	7Z1sPx3uBznRjtkXGlgTyaPbcNuj8IjFg3wcAM3Ep4Wc19AzSgglMG9iCkg8ClMnkuF4=
X-detected-operating-system: by eggs.gnu.org: GNU/Linux 2.2.x-3.x [generic]
X-Received-From: 212.227.126.133
X-BeenThere: emacs-devel@gnu.org
X-Mailman-Version: 2.1.21
Precedence: list
List-Id: "Emacs development discussions." <emacs-devel.gnu.org>
List-Unsubscribe: <https://lists.gnu.org/mailman/options/emacs-devel>,
	<mailto:emacs-devel-request@gnu.org?subject=unsubscribe>
List-Archive: <http://lists.gnu.org/archive/html/emacs-devel/>
List-Post: <mailto:emacs-devel@gnu.org>
List-Help: <mailto:emacs-devel-request@gnu.org?subject=help>
List-Subscribe: <https://lists.gnu.org/mailman/listinfo/emacs-devel>,
	<mailto:emacs-devel-request@gnu.org?subject=subscribe>
X-List-Received-Date: Sat, 09 Apr 2016 20:01:35 -0000
Content-Length: 3540
Lines: 82

This is an OpenPGP/MIME signed message (RFC 4880 and 3156)
--utpW0BGtxqEVlfLO7T0CtwIneomGl0f2j
Content-Type: multipart/mixed; boundary="cokjCaTQ6dkuqwnq8lX164OC50H88dWV3"
From: =?UTF-8?Q?Cl=c3=a9ment_Pit--Claudel?= <clement.pit@gmail.com>
To: Eli Zaretskii <eliz@gnu.org>
Cc: dev@caliopen.local
Message-ID: <57095F97.4060305@gmail.com>
Subject: Re: How do I set up font fallback in a robust way?
References: <570954AA.7070604@gmail.com> <834mbain03.fsf@gnu.org>
In-Reply-To: <834mbain03.fsf@gnu.org>

--cokjCaTQ6dkuqwnq8lX164OC50H88dWV3
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable

On 04/09/2016 03:46 PM, Eli Zaretskii wrote:
> The default fontset already defines specific blocks to be handled by
> these fonts, see fontset.el.  What problems, specifically, do you have
> with the default setup and the current emacs-25 branch?

I get relatively inconsistent results in terms of which font is chosen to=
 display a given symbol. The pair of fonts that I mentioned (Ubuntu Mono =
and Symbola) was just an example; my question is about configuring fallba=
cks for any given pair of fonts: it could be Source Code Pro and Asana Ma=
th instead of Ubuntu Mono and Symbola, for example.

>> What's the proper way to configure font fallback?
>=20
> In general: find the characters you want to change and augment the
> default fontset to use the font you want for them.

Is it enough to augment the default fontset? Changing the :height of the =
'default font creates a new fontset, which doesn't respect the fallbacks =
that I configure. Hence my using

  (dolist (ft (fontset-list))
    (set-fontset-font ft 'unicode (font-spec :name "Ubuntu Mono"))
    (set-fontset-font ft 'unicode (font-spec :name "Symbola") nil 'append=
))

> But let's first see the specific problems you have with the Emacs 25
> defaults.  This issue got some attention a few months ago, so I'm
> surprised to hear there are still problems in that area.
>=20
>> *Note*: for testing purposes, here are a few math characters: `=E2=84=95=
=F0=9D=93=9F=E2=A7=BA=C3=97=E2=89=A0=E2=89=A5=E2=89=A4=C2=B1=C2=AC=E2=88=A8=
=E2=88=A7=E2=88=83=E2=88=80=CE=BB=E2=9F=BF=E2=9F=B9=E2=8A=A5=E2=8A=A4=E2=8A=
=A2`
>=20
> Which, if any, of those give you trouble with the default fontset?

=F0=9D=93=9F is displayed using `Latin Modern Math' in emacs -Q, it seems=
=2E In any case, Ubuntu Mono and Symbola were just two examples.


--cokjCaTQ6dkuqwnq8lX164OC50H88dWV3--

--utpW0BGtxqEVlfLO7T0CtwIneomGl0f2j
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v2.0.22 (GNU/Linux)

iQIcBAEBAgAGBQJXCV+XAAoJEPqg+cTm90wjR9wP/0v04+f8TLtGV7UPPf+NC1/l
9Kt82ECrQJBBy7hUZ0jgjkAXAuo0D3IU93fqn6MXpoNAG/X+7o7o4RLeTdyaGXqs
CjqXd7siJHuau4X0MXk6+omb6bAhMshjmHcbAjJ+KHh4a0NN2jfjpd1Y6hnCQkoe
HXWa+yHQNeoQI805B5imcUFRPxe7zjnnoSHB3ZDyGjoJdVCvgkO8PpnSck5Z6dEl
pGqjllDHwrCHgH6d0uBfaJclf0CwRW+LD6zB3ApHYbegeWCBPRmwwXVq2DObBVkH
pDiqw11N7jNtc4VTV2sXwCKOTWRci+iAp+LwLDq/Xwu4zwO5dIK9JjHPugBmIOOg
OCSRuQYjpboW1DyPRyGw48pva/AqPqOme3WC8rIows2GRNsJYC+WQ/a+W0S5f1C/
80gJEcwNv5My25JA+3KQ/wPr6e0HXHFaRjqvYw7AIPw1Z6klsyqNoICTT9rdJkdL
MLGshdte+uMwLXhYNrFwnI4C1ykHf6InfPm6DEsU02OyR4+Qdw/vuKouZlGw6zje
xU4sDqOcjT7viws0Q+GT0yRFo+i/CrUCVzCMr3GS4XJmmrgEQOvl9i2ffg4+VwPS
bvyRvMAVhatEwo9brLoZAqSV3oivyUxYM3LymULehmCtaOnn8l4sYSlHkttuEOr2
LJjNg1rucFlElVeRV4t5
=sJCs
-----END PGP SIGNATURE-----

--utpW0BGtxqEVlfLO7T0CtwIneomGl0f2j--

